<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/5.3.2/bootbox.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/responsive.bootstrap4.min.js"></script>
    <!-- <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css"> -->
    <link href="assets/vendor/fonts/circular-std/style.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/libs/css/style.css">
    <link rel="stylesheet" href="assets/vendor/fonts/fontawesome/css/fontawesome-all.css">
    <!-- <link rel="stylesheet" href="assets/vendor/vector-map/jqvmap.css">
    <link href="assets/vendor/jvectormap/jquery-jvectormap-2.0.2.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/vendor/charts/chartist-bundle/chartist.css">
    <link rel="stylesheet" href="assets/vendor/charts/c3charts/c3.css">
    <link rel="stylesheet" href="assets/vendor/charts/morris-bundle/morris.css">
    <link rel="stylesheet" type="text/css" href="assets/vendor/daterangepicker/daterangepicker.css" />
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- alert box -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css">

    <title>นับครุภัณฑ์</title>
    <script>
        var table;
        var Email_user;
        var rol;
        var pattern = /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;
        var selected
        var EmailOfUser
        $(document).ready(function () {
            $(".atyear1").html(new Date().getFullYear() + 543)

            table = $('#myTable').DataTable({
                columns: [
                    { data: "Name", title: "ชื่อผู้ใช้" },
                    { data: "Email_user", title: "อีเมลผู้ใช้" },
                    { data: "Email_assigner", title: "ผู้แต่งตั้ง" },
                    { data: "Role", title: "หน้าที่" },
                    {
                        data: "Role",
                        title: "แก้ไขหรือลบผู้ใช้",
                        render: function (data, type, full, meta) {
                            return data ? "<button class='btn btn-warning rounded editemail " + data + "'>แก้ไข</button> <button class='btn btn-secondary rounded deleteemail ml-1 " + data + "'>ลบ</button>" : ''
                        }, orderable: false

                    }
                ],
            });
            $.ajax({
                method: "GET",
                url: "/api/year/user"
            }).done(function (data, state, xhr) {

                var values = [];
                selected = $('#Year').val();

                $('.Year').append($(document.createElement('select')).prop({

                    class: 'year',
                    name: 'year',
                    style: 'border-color: white',
                    class: 'mt-1 ml-1 year',
                    id: 'Year',
                    name: 'Year'
                })
                )

                if (data[0].Year != new Date().getFullYear() + 543) {
                    for (let i = 0; i < data.length; i++) {
                        values[i] = [data[i].Year]
                    }
                    values.push(new Date().getFullYear() + 543)

                    for (let i = values.length - 1; i >= 0; i--) {
                        $('.year').append($(document.createElement('option')).prop({
                            value: values[i],
                            text: values[i]
                        }))

                    }
                    // console.log(data)
                } else {
                    for (let i = 0; i < data.length; i++) {
                        values[i] = [data[i].Year]

                    }
                    for (let i = 0; i < values.length; i++) {
                        $('.year').append($(document.createElement('option')).prop({
                            value: values[i],
                            text: values[i]
                        }))

                    }
                }

                selected = $('#Year').val();
                // console.log(selected + '1111111')



                $('select.year').change(function () {
                    selected = $(this).children("option:selected").val();
                    getuser()
                    // $.ajax({
                    //     method: "GET",
                    //     url: "/manageUser/showAllUser/" + selected
                    // }).done(function (dataSet, state, xhr) {
                    //     getuser()
                    // }).fail(function (xhr, state, error) {
                    // })
                })

            })

            $("#save").click(function () {
                let newmail = $("#editMail").val();

                if (!newmail || newmail.length === 0) {
                    swal({
                        title: "กรุณากรอกอีเมล",
                        type: "info",
                        showCancelButton: false,
                        confirmButtonClass: "btn-primary rounded",
                        confirmButtonText: "ตกลง",
                        closeOnConfirm: true,
                    })

                } else {
                    $(".btn-sm").hide();
                    $(".but").append('<input class="btn btn-sm" type="button" value = "ตกลง" onclick = "location.reload()" style="float: right; background-color: #0a72c1; color:white">')

                    if (newmail.match(pattern)) {
                        $.ajax({
                            method: "GET",
                            url: "/api/profile/infouser"
                        }).done(function (dataSet, state, xhr) {

                            if (rol == "กรรมการ") {
                                rol = 2
                            } else if (rol == "ผู้ดูแลระบบ") {
                                rol = 1
                            }
                            var x = document.getElementById("admin2").checked;
                            if (x) {
                                rol = 1;
                            } else {
                                rol = 2
                            }
                            $.ajax({
                                method: "PUT",
                                url: "/api/manageUser/update/" + newmail + "/" + dataSet.email + "/" + rol + "/" + Email_user
                            }).done(function (data, state, xhr) {
                                swal({
                                    title: "<small>บันทึกสำเร็จ</small>",
                                    type: "success",
                                    confirmButtonClass: "btn-success rounded",
                                    confirmButtonText: "ยืนยัน",
                                    closeOnConfirm: true,
                                    closeOnCancel: true,
                                    html: true
                                },
                                    function (isConfirm) {
                                        if (isConfirm) {
                                            window.location.reload()
                                        }
                                    });
                            }).fail(function (xhr, state, error) {

                                // swal({
                                //     title: "มีผู้ใช้นี้ในระบบแล้ว",
                                //     type: "info",
                                //     showCancelButton: false,
                                //     confirmButtonClass: "btn-primary rounded",
                                //     confirmButtonText: "ตกลง",
                                //     closeOnConfirm: true,
                                // })
                            });
                            // $.ajax({
                            //     method: "GET",
                            //     url: "/user/profile/inspectedItem/Total/Number1/" + data.email
                            // }).done(function (dataSet, state, xhr) {
                            //     $("#all").html(dataSet[0].Numbers_of_Inspected_Item);
                            // }).fail(function (xhr, state, error) {
                            //     //get data failed
                            //     $(".btn-sm").hide();
                            //     $(".but").append('<input class="btn btn-sm" type="button" value = "ตกลง" onclick = "location.reload()" style="float: right; background-color: #0a72c1; color:white">')
                            //     $(".alertText").html(xhr.responseText)
                            //     $("#alertmodal").modal();
                            // });
                        }).fail(function (xhr, state, error) {
                            //get data failed
                            $(".btn-sm").hide();
                            $(".but").append('<input class="btn btn-sm" type="button" value = "ตกลง" onclick = "location.reload()" style="float: right; background-color: #0a72c1; color:white">')
                            $(".alertText").html(xhr.responseText)
                            $("#alertmodal").modal();
                        });

                    } else {

                        swal({
                            title: "รูปแบบอีเมลไม่ถูกต้อง",
                            type: "info",
                            showCancelButton: false,
                            confirmButtonClass: "btn-primary rounded",
                            confirmButtonText: "ตกลง",
                            closeOnConfirm: true,
                        })
                    }
                }

            });

            $("#save2").click(function () {
                let newmail = $("#addMail2").val();
                let Role;
                if (!newmail || newmail.length === 0) {

                    swal({
                        title: "กรุณากรอกอีเมล",
                        type: "info",
                        showCancelButton: false,
                        confirmButtonClass: "btn-primary rounded",
                        confirmButtonText: "ตกลง",
                        closeOnConfirm: true,
                    })
                }
                else {
                    if (newmail.match(pattern)) {
                        var g = document.getElementById("admin").checked;
                        if (g) {
                            Role = 1;
                        } else {
                            Role = 2
                        }
                        $.ajax({
                            method: "GET",
                            url: "/api/profile/infouser"
                        }).done(function (dataSet, state, xhr) {
                            $.ajax({
                                method: "POST",
                                url: "/api/manageUser/add/" + newmail + "/" + dataSet.email + "/" + Role
                            }).done(function (data, state, xhr) {
                                $(".btn-sm").hide();
                                $(".but").append('<input class="btn btn-sm" type="button" value = "ตกลง" onclick = "location.reload()" style="float: right; background-color: #0a72c1; color:white">')

                                swal({
                                    title: "<small>บันทึกสำเร็จ</small>",
                                    type: "success",
                                    confirmButtonClass: "btn-success rounded",
                                    confirmButtonText: "ยืนยัน",
                                    closeOnConfirm: true,
                                    closeOnCancel: true,
                                    html: true
                                },
                                    function (isConfirm) {
                                        if (isConfirm) {
                                            window.location.reload()
                                        }
                                    });

                            }).fail(function (xhr, state, error) {
                                swal({
                                    title: "มีผู้ใช้นี้ในระบบแล้ว",
                                    type: "info",
                                    showCancelButton: false,
                                    confirmButtonClass: "btn-primary rounded",
                                    confirmButtonText: "ตกลง",
                                    closeOnConfirm: true,
                                })
                            });

                        }).fail(function (xhr, state, error) {

                        });
                    } else {

                        swal({
                            title: "รูปแบบอีเมลไม่ถูกต้อง",
                            type: "info",
                            showCancelButton: false,
                            confirmButtonClass: "btn-primary rounded",
                            confirmButtonText: "ตกลง",
                            closeOnConfirm: true,
                        })
                    }
                }
            });

            $.ajax({
                method: "GET",
                url: "/api/profile/infouser"
            }).done(function (data, state, xhr) {
                $("#user").html(data.name);
                EmailOfUser = data.email
                document.getElementById('pic').src = data.photo;
                if (data.email === undefined) {
                    window.location.replace("/api/checkpage")
                } else {
                    $.ajax({
                        method: "GET",
                        url: "/api/manageUser/showAllUsers/" + data.email
                    }).done(function (dataSet, state, xhr) {
                        if (dataSet[0] === undefined || dataSet[0].data === 0) {
                            window.location.replace("/api/checkpage")
                        }
                        if (dataSet[0].Role == 1 || dataSet[0].Role == 3) {
                            $("#userhistory").hide();
                        }

                        for (let i = 0; i < dataSet.length; i++) {
                            if (dataSet[i].Role == 2) {
                                dataSet[i].Role = "กรรมการ"
                            } else if (dataSet[i].Role == 1) {
                                dataSet[i].Role = "ผู้ดูแลระบบ"
                            } else {
                                dataSet[i].Role = "ผู้ดูแลถาวร"
                            }
                        }
                        $("#rol2").html(dataSet[0].Role)

                    }).fail(function (xhr, state, error) {
                        //get data failed
                        $(".alertText").html(xhr.responseText)
                        $("#alertmodal").modal();
                    });
                }
            }).fail(function (xhr, state, error) {
                //get data failed
                $(".alertText").html(xhr.responseText)
                $("#alertmodal").modal();
            });



            $('#adduser').on('click', function () {
                $(".bd-example-modal-lg").modal();

            });

            $('#myTable tbody ').on('click', '.deleteemail', function () {
                var data = table.row($(this).parents('tr')).data();
                Email_user = data.Email_user;

                swal({
                    title: "ยืนยันการลบ " + Email_user + "",
                    type: "warning",
                    showCancelButton: true,
                    confirmButtonClass: "btn-danger rounded",
                    cancelButtonClass: "btn-primary rounded",
                    confirmButtonText: "ยืนยัน",
                    cancelButtonText: "ยกเลิก",
                    closeOnConfirm: false,
                    closeOnCancel: true
                },
                    function (isConfirm) {
                        if (isConfirm) {
                            $.ajax({
                                method: "GET",
                                url: "/api/user/profile/inspectedItem/Total/Number1/" + Email_user
                            }).done(function (dataSet, state, xhr) {
                                if (dataSet[0].Numbers_of_Inspected_Item == 0) {
                                    $.ajax({
                                        method: "DELETE",
                                        url: "/api/manageUser/deleteAllUser/" + Email_user
                                    }).done(function (dataSet, state, xhr) {
                                        swal({
                                            title: "<small>บันทึกสำเร็จ</small>",
                                            type: "success",
                                            showCancelButton: false,
                                            confirmButtonClass: "btn-success rounded",
                                            confirmButtonText: "ยืนยัน",
                                            closeOnConfirm: true,
                                            html: true,
                                            closeOnCancel: true
                                        },
                                            function (isConfirm) {
                                                if (isConfirm) {
                                                    getuser()
                                                }
                                            });
                                    })
                                } else {
                                    swal({
                                        title: "ไม่สามารถลบได้",
                                        text: "เนื่องจากผู้ใช้นี้ได้เริ่มตรวจนับแล้ว",
                                        type: "info",
                                        showCancelButton: false,
                                        confirmButtonClass: "btn-primary rounded",
                                        confirmButtonText: "ตกลง",
                                        closeOnConfirm: true,
                                    })
                                }
                            }).fail(function (xhr, state, error) {
                                //get data failed
                                $(".alertText").html(xhr.responseText)
                                $("#alertmodal").modal();
                            });
                        }
                    });
            })

            $('#myTable tbody ').on('click', '.editemail', function () {
                var data = table.row($(this).parents('tr')).data();
                Email_user = data.Email_user;
                rol = data.Role;

                $("#editMail").val(Email_user)
                $.ajax({
                    method: "GET",
                    url: "/api/profile/infouser"
                }).done(function (data, state, xhr) {
                    $.ajax({
                        method: "GET",
                        url: "/api/user/profile/inspectedItem/Total/Number1/" + Email_user
                    }).done(function (dataSet, state, xhr) {
                        if (dataSet[0].Numbers_of_Inspected_Item == 0) {

                            $("#modaledit").modal('toggle');
                        } else {
                            $(".btn-sm").hide();
                            $(".but").append('<input class="btn btn-sm" type="button" value = "ตกลง" onclick = "location.reload()" style="float: right; background-color: #0a72c1; color:white">')
                            swal({
                                title: "ไม่สามารถแก้ไขได้",
                                text: "เนื่องจากผู้ใช้นี้ได้เริ่มตรวจนับแล้ว",
                                type: "info",
                                showCancelButton: false,
                                confirmButtonClass: "btn-primary rounded",
                                confirmButtonText: "ตกลง",
                                closeOnConfirm: true,
                            })
                        }
                    }).fail(function (xhr, state, error) {
                        alert("reere")
                    });

                }).fail(function (xhr, state, error) {
                });
            });
            getuser()
        });

        function getuser() {
            $.ajax({
                method: "GET",
                url: "/api/manageUser/showAlladminname"
            }).done(function (datas, state, xhr) {
                $.ajax({
                    method: "GET",
                    url: "/api/manageUser/showAllUser/" + selected
                }).done(function (dataSet, state, xhr) {
                    // console.log(selected)
                    if (dataSet.length == 0) {
                        swal({
                            title: "ไม่พบบัญชีผู้ใช้",
                            type: "info",
                            confirmButtonClass: "btn-primary rounded",
                            confirmButtonText: "ตกลง",
                            closeOnConfirm: true,
                        })
                    }

                    for (let i = 0; i < dataSet.length; i++) {
                        if (dataSet[i].Role == 2) {
                            dataSet[i].Role = "กรรมการ"
                        } else if (dataSet[i].Role == 1) {
                            dataSet[i].Role = "ผู้ดูแลระบบ"
                        } else {
                            dataSet[i].Role = "ผู้ดูแลถาวร"
                        }

                        for (let j = 0; j < datas.length; j++) {
                            if (dataSet[i].Email_assigner == datas[j].Email_user) {
                                if (datas[j].Name !== null) {
                                    dataSet[i].Email_assigner = datas[j].Name
                                }
                            }
                        }

                        if (dataSet[i].Name !== null) {
                        } else {
                            dataSet[i].Name = dataSet[i].Email_user + "(ยังไม่ยืนยัน) "
                        }
                    }

                    for (let i = 0; i < dataSet.length; i++) {
                        if (dataSet[i].Email_user == EmailOfUser) {
                            // console.log(dataSet[i].Email_user + " " + EmailOfUser)
                            // console.log(dataSet)
                            dataSet.splice(i, 1)
                        }
                    }

                    table.clear();
                    //display modified JSON in DataTable
                    table.rows.add(dataSet).draw();
                    yearDis = new Date().getFullYear() + 543
                    if (selected != yearDis) {
                        $("#adduser").attr("disabled", true)
                        $(".editemail").attr("disabled", true)
                        $(".deleteemail").attr("disabled", true)
                        $("#adduser").hide()
                    }
                    else {
                        $("#adduser").show()
                    }
                    $('.3').hide();
                    $('.ผู้ดูแลถาวร').hide();
                }).fail(function (xhr, state, error) {
                    //get data failed
                    $(".alertText").html(xhr.responseText)
                });
            })
        }

    </script>
</head>

<body>
    <div class="dashboard-main-wrapper">
        <!-- navbar -->
        <!-- ============================================================== -->
        <div class="dashboard-header">
            <nav class="navbar navbar-expand-lg bg-white fixed-top">
                <!-- <div class="row">
                    <div class="col-sm-2 ml-4">
                        <img src="img/logoit.JPG" style="width: 280px;">
                        <span class="border-left ml-3"></span>
                    </div>
                    <div class="col-md-8 ml-2 text-right ">
                        <h6 class="font-weight-bold " style="color: rgb(2, 121, 251);">ประจำปี</h6>
                    </div>
                    <div class="col-md- text-right ">

                        <h6 class="font-weight-bold atyear1" style="color: rgb(2, 121, 251);">ปี</h6>
                    </div>
                </div> -->
                <img src="/img/logoit.JPG" style="height: 50px;">
                <h6 class="font-weight-bold ml-5" style="color: rgb(2, 121, 251);">ประจำปี</h6>
                <h6 class="font-weight-bold atyear1 ml-2" style="color: rgb(2, 121, 251);">ปี</h6>

                <ul class="navbar-nav ml-auto navbar-right-top">

                    <li class="nav-item dropdown notification">

                        <ul class="dropdown-menu dropdown-menu-right notification-dropdown">

                            <li>
                                <div class="list-footer"> <a href="#">การแจ้งเตือนทั้งหมด</a></div>
                            </li>
                        </ul>
                    </li>

                    <li class="nav-item dropdown nav-user">
                        <a class="nav-link nav-user-img" href="#" id="navbarDropdownMenuLink2" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false"><img id="pic" src="/img/avatar-1.jpg" alt=""
                                class="user-avatar-md rounded-circle"></a>
                        <div class="dropdown-menu dropdown-menu-right nav-user-dropdown"
                            aria-labelledby="navbarDropdownMenuLink2">
                            <div class="nav-user-info">
                                <h5 class="mb-0 text-white nav-user-name user" id="user">Ruttathorn </h5>
                                <span class="status"></span><span class="ml-2" id="rol2"></span>
                            </div>
                            <a class="dropdown-item" href="/api/auth/logout"><i
                                    class="fas fa-power-off mr-2"></i>ออกจากระบบ</a>
                        </div>
                    </li>
                </ul>

            </nav>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- จบ navbar -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- navbar ด้านข้าง -->
    <!-- ============================================================== -->
    <div class="nav-left-sidebar sidebar-light">
        <div class="menu-list">
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="d-xl-none d-lg-none" href="#">Dashboard</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav flex-column">

                        <li class="nav-item ">
                            <a class="nav-link" href="/api/mainpage" aria-expanded="false"><i
                                    class="fa fa-home"></i>หน้าหลัก
                            </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link " href="/api/adminhistory" aria-expanded="false"><i
                                    class="fa fa-user"></i>ประวัติผู้ใช้งาน </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>
                        <li class="nav-item ">
                            <a class="nav-link " href="/api/User_history" aria-expanded="false" id="userhistory"><i
                                    class="fa fa-user"></i>โปรไฟล์ </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>

                        <li class="nav-item ">
                            <a class="nav-link " href="/api/dashboard" aria-expanded="false"><i
                                    class="fa fa-dashboard"></i>แดชบอร์ด </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>

                        <li class="nav-item ">
                            <a class="nav-link" href="/api/asset" aria-expanded="false"><i
                                    class="fa fa-archive"></i>ครุภัณฑ์ </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>

                        <li class="nav-item ">
                            <a class="nav-link" href="/api/announce" aria-expanded="false"><i
                                    class="fa fa-bullhorn"></i>ข่าวประชาสัมพันธ์ </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>

                        <li class="nav-item" id="manageu">
                            <a class="nav-link active" href="/api/manageUser" aria-expanded="false"><i
                                    class="fa fa-edit"></i>จัดการผู้ใช้
                            </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">

                                </ul>
                            </div>
                        </li>

                        <li class="nav-item" id="DateManage">
                            <a class="nav-link " href="/api/Date_manage" aria-expanded="false"><i
                                    class="fa fa-clock"></i>จัดการเวลา
                            </a>
                            <div id="submenu-1" class="collapse submenu">
                                <ul class="nav flex-column">
                                </ul>

                            </div>
                        </li>

                    </ul>
                </div>
            </nav>
        </div>

    </div>
    <!-- ============================================================== -->
    <!-- เสร็จ navbar -->
    <!-- ============================================================== -->
    <div class="dashboard-wrapper mt-1">
        <div class="dashboard-finance">
            <div class="container-fluid dashboard-content">
                <!-- ============================================================== -->
                <div class="row ">
                    <div class="nav">
                        <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9">
                            <div class="page-header ml-5 ">
                                <h2 class=" ">จัดการผู้ใช้ </h2>
                            </div>
                        </div>

                        <!-- ======================================================== -->
                        <!-- ดรอปดาว -->
                        <!-- ======================================================== -->
                        <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col-3">
                            <div class="input-group mb-3">
                                <div class="input-group-append be-addon mt-3"><span
                                        style="font-size: 18px;color: black;">ปี</span>
                                    <div class="btn-group " role="group">
                                        <div class="Year mb-4">

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>




                <div class="container-fluid" style="background-color: white;">
                    <div class="row ">


                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 mt-3 mb-3 text-right">
                            <div class="btn btn-primary rounded text-light" id="adduser">
                                เพิ่มผู้ใช้
                            </div>
                        </div>
                    </div>

                    <div class="table-responsive-xl">
                        <table id="myTable" class="table table-striped table-bordered text-center" style="width:100%">
                        </table>
                    </div>
                </div>

            </div>
            <!-- footer  -->
            <!-- ============================================================== -->

            <!-- <div class="" style="background-color:  rgb(50, 50, 51);  ">
                <div class="row ml-5 mr-5" style="background-color: rgb(50, 50, 51);">
                    <div class="col-xs-12 col-sm-12 col-md-4 mt-5">
                        <h3>
                            <blockquote>
                                <img src="/img/itlogo.png">
                                <h4 style="color:azure;font-size:30px;">สำนักวิชาเทคโนโลยีสารสนเทศ</h4>
                                <div style="border: 0.5px solid red; width: 7cm;"></div>
                                <code style="color: azure;font-size: 20px;">มหาวิทยาลัยแม่ฟ้าหลวง</code>
                            </blockquote>
                        </h3>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4 mt-5">
                        <div class="copyright">
                            <h4 class="header-footer" style="color: azure;">ติดต่อ <br>
                                <div style="border: 1px solid red; width: 7cm;"></div>
                            </h4>
                            <p style="color: azure; font-size: 14px; font-weight: 200;">
                                สำนักวิชาเทคโนโลยีสารสนเทศ
                                <br>
                                มหาวิทยาลัยแม่ฟ้าหลวง
                                <br>
                                333 หมู่ 1 ตำบลท่าสุด อำเภอเมือง จังหวัดเชียงราย 57100
                                <br>
                                โทรศัพท์ 0 5391 6741-2
                                <br>
                                โทรสาร 0 5391 6743
                                <br>
                                อีเมล: itschool@mfu.ac.th
                            </p>
                            <p></p>
                            <ul class="mfu-social">

                                <a href="https://www.facebook.com/itschool.mfu.page/" target="_blank"
                                    class="facebook-icon mr-3">
                                    <i class="fab fa-facebook">

                                    </i>
                                </a>

                                <a href="https://www.youtube.com/channel/UCbvvlT0UyZHCYdPTXL7vHXQ/featured"
                                    target="_blank" class="youtube-icon">
                                    <i class="fab fa-youtube">

                                    </i>
                                </a>
                            </ul>
                            <p></p>
                        </div>
                    </div>
                    <div class="col-xs-12 col-sm-6 col-md-4 mt-5"><iframe
                            src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2Fitschool.mfu.page%2F&amp;tabs=timeline&amp;width=340&amp;height=250&amp;small_header=true&amp;adapt_container_width=true&amp;hide_cover=false&amp;show_facepile=true&amp;appId"
                            width="100%" height="300" style="border:none;overflow:hidden" scrolling="no" frameborder="0"
                            allowtransparency="true" allow="encrypted-media"></iframe>


                    </div>

                </div>
                <a class="scroll-to-top" style="display: none;">
                    <i class="fa fa-long-arrow-up" aria-hidden="true"></i>
                </a>
                <script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag() { dataLayer.push(arguments); }
                    gtag('js', new Date());

                    gtag('config', 'UA-148131712-1');
                </script>
            </div> -->
            <!-- ============================================================== -->
            <!-- ======================== เสร็จ footer ========================= -->
            <!-- ============================================================== -->
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- modal  -->
    <!-- ============================================================== -->

    <div class="modal fade bd-example-modal-sm" tabindex="-1" Role="dialog" aria-labelledby="mySmallModalLabel"
        aria-hidden="true" id="modaledit">
        <div class="modal-dialog" Role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">แก้ไขผู้ใช้</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="email-edit" class="col-form-label">อีเมลผู้ใช้ที่แก้ไข : </label>
                            <input type="email" class="form-control" id="editMail">
                        </div>
                        <input type="checkbox" id="admin2" name="admin" value="admin">
                        <label for="vehicle1">ผู้ดูแลระบบ</label>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded" data-dismiss="modal">ยกเลิก</button>
                    <button type="button" class="btn btn-primary rounded" id="save">ยืนยัน</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- เสร็จ modal  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- modal2  -->
    <!-- ============================================================== -->

    <div class="modal fade bd-example-modal-lg" tabindex="-1" Role="dialog" aria-labelledby="mySmallModalLabel"
        aria-hidden="true" id="modaladd">
        <div class="modal-dialog" Role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">เพิ่มผู้ใช้</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="addMail2" class="col-form-label">อีเมลผู้ใช้ใหม่ : </label>
                            <input type="email" class="form-control" id="addMail2">
                        </div>
                        <input type="checkbox" id="admin" name="admin" value="admin">
                        <label for="admin">ผู้ดูแลระบบ (ถ้าไม่เลือกจะเป็นการเพิ่มกรรมการ)</label>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary rounded" data-dismiss="modal">ยกเลิก</button>
                    <button type="button" class="btn btn-primary rounded" id="save2">ยืนยัน</button>
                </div>
            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- เสร็จ modal2  -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <div class="modal bd-example-modal-sm fade" id="alertmodal" tabindex="-1" Role="dialog"
        aria-labelledby="mySmallModalLabel" data-backdrop="static" data-keyboard="false" aria-hidden="true">
        <div class="modal-dialog" Role="document">
            <div class="modal-content" style="background-color : #3f3f3f">
                <div class="modal-body">
                    <h5 style="color: #ffffff; font-weight:bold;">ประกาศ</h5>
                    <p class="alertText" style="color: white"></p>
                    <div class="but"></div>
                    <input class="btn btn-sm" type="button" value="ตกลง" data-dismiss="modal"
                        style="float: right; background-color: #0a72c1; color:white">

                </div>


            </div>
        </div>
    </div>
    <!-- ============================================================== -->
    <!-- เสร็จ modal  -->
    <!-- ============================================================== -->
</body>

</html>