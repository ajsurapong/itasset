<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <style>
        @media print {
            /* config this to match zebra GC420t */
            @page {
                size: 10cm 3cm;
                /* size: landscape; */
                /* t r b l */
                margin: 0.1cm 0cm 0cm 1.5cm;
            }

            div.row {
                /* break-after: always; */
                page-break-after: always;
            }
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <!-- Note add .. to using local JS -->
    <script src="/JS_Files/qrcode.min.js"></script>
    <title>พิมพ์ QRcode</title>
</head>
<!-- <style>
    @media print {
        .myDivToPrint {
            background-color: rgb(0, 0, 0);
            height: 100%;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            margin: 10;
            padding: 10px;
            line-height: 18px;

        }
    }
</style> -->

<body>
    <div class="container-fluid">
        <p class="text-center mt-3"><button class="btn btn-primary rounded" onclick="printDiv('printHere')">Print</button></p>
        
        <div id="printHere" class=" my-4">
            <div id="qrcode" class="my-2"></div>
        </div>

    </div>


    <script>
        $(document).ready(function () {
            const data = JSON.parse(sessionStorage.getItem("selectedItemQR"));
            // let data = ['672000500349004', '772000500349004', '872000500349004', '972000500349004', '072000500349004', '172000500349004'];
            var k = 0;  //qrcode counter
            
            // Generate qrcode to two columns
            for (var i = 0; i < Math.ceil(data.length / 2); i++) {
                //create a row
                $("#qrcode").append("<div class='row my-2' id=row" + i + "></div>");

                // Here we can use loop if we want to create more than two columns
                // but using two manual columns help formatting left and right columns differently
                // add left column
                $("#row" + i).append("<div class='col-3 my-2'><div id=qr" + i + "0></div></div>")
                new QRCode(document.querySelector("#qr" + i + "0"), { width: 100, height: 100, }).makeCode(data[k]);
                $("#qr" + i + "0").append("<div style = 'font-weight: bold;font-size: 12px;'>" + data[k] + "</div>");
                k++;

                if(k<data.length) {
                    // add right column
                    $("#row" + i).append("<div class='col-3 my-2'><div id=qr" + i + "1></div></div>")
                    new QRCode(document.querySelector("#qr" + i + "1"), { width: 100, height: 100, }).makeCode(data[k]);
                    $("#qr" + i + "1").append("<div style = 'font-weight: bold;font-size: 12px;'>" + data[k] + "</div>");                    
                }
                k++;
            }
        });

        function printDiv(divName) {
            var printContents = document.getElementById(divName).innerHTML;
            var originalContents = document.body.innerHTML;

            //print without button
            document.body.innerHTML = printContents;
            window.print();
            document.body.innerHTML = originalContents;
        }
    </script>

</body>
</html>